/* 
 * Palette: Brick White
 * Zork packaging + ballpoint pen doodles + 70s sci-fi paperback
 * Literary, not neon. Hand-drawn, not high-production.
 * 
 * References: /docs/design/
 *   zork_*.png     - Infocom packaging, white bricks, folio disk
 *   eliza_*.png    - Weizenbaum 1966, ACM flowcharts, typewriter serif
 * 
 * See also: masswerk.at/eliza, Weizenbaum "ELIZA" CACM Vol.9 No.1
 */
:root {
    /* === WHITES === */
    --white-brick: #f4f1eb;        /* Zork packaging, warm cream */
    --white-bond: #fffef9;         /* typewriter paper, bright clean */
    --white-newsprint: #e8e4dc;    /* aged journal, gray-yellow */
    --white-terminal: #f0f0e8;     /* continuous-feed printout */
    --white-pure: #ffffff;         /* escape hatch */
    
    /* === BEIGES (computer plastic, 70s-80s) === */
    --beige-vt100: #d4c8a8;        /* DEC terminal casing */
    --beige-ibm: #c9bea0;          /* IBM PC plastic */
    --beige-apple: #e0d8c0;        /* Apple II case */
    
    /* === BLACKS === */
    --black-terminal: #0a0a0a;     /* CRT deep black */
    --black-ink: #2a2a2a;          /* pen on paper */
    --black-soft: #1a1a1a;         /* rain-slick, less harsh */
    
    /* === GRAYS (ink weights) === */
    --gray-ink: #2a2a2a;           /* full pen stroke */
    --gray-text: #444444;          /* body copy */
    --gray-muted: #666666;         /* faded, secondary */
    --gray-hint: #999999;          /* placeholder, disabled */
    --gray-rule: #cccccc;          /* horizontal rules, borders */
    
    /* === PHOSPHORS (terminal text) === */
    --green-phosphor: #33ff33;     /* P1 phosphor, classic */
    --green-amber: #ffb000;        /* P3 amber terminal */
    --green-cool: #00ff66;         /* later green, bluer */
    --green-dim: #1a9f1a;          /* low brightness */
    
    /* === ACCENTS (Zork cover, 70s sci-fi) === */
    --accent-gold: #c9a227;        /* treasure, coins */
    --accent-rust: #8b4513;        /* mountains, saddle leather */
    --accent-forest: #355e3b;      /* trees, hunter green */
    --accent-blood: #8b0000;       /* dark red, not neon */
    --accent-copper: #b87333;      /* warm metal */
    --accent-slate: #4a5568;       /* cool neutral */
    
    /* === THE TURN (serif moment, newspaper) === */
    --serif-warm: #5c5347;         /* sepia ink */
    --serif-cool: #4a4a4a;         /* newsprint black */
    --serif-faded: #7a7062;        /* aged paper */
    
    /* === SEMANTIC (use these in components) === */
    --bg-page: var(--white-brick);
    --bg-terminal: var(--black-terminal);
    --text-primary: var(--gray-ink);
    --text-terminal: var(--accent-forest);
    --border-terminal: var(--beige-vt100);
    --text-serif: var(--serif-warm);
    --danger: #a03030;
    
    /* === TYPOGRAPHY === */
    --font-mono: 'VT323', 'Courier New', monospace;
    --font-serif: 'Georgia', 'Times New Roman', serif;
    --font-body: 'Georgia', 'Times New Roman', serif;  /* or system-ui for modern */

    /* === MATERIALS (writing surfaces) === */
    --stone: #b8b0a0;             /* limestone, tablet */
    --wax: #d4c9a8;               /* writing tablet, beeswax */
    --papyrus: #d6c6a5;           /* reed paper, warm tan */
    --parchment: #ddd5c0;         /* animal skin, vellum */
    --folio: #c9bfa6;             /* bound book edge, deckle */
    --lead-type: #6b6b6b;         /* cast metal, composing stick */
    --lead-rule: #888888;         /* metal rule, furniture */

    --line-height-dense: 1.5;     /* notebook, not internet */
    
    /* Academic / typewriter alternatives (add to Google Fonts link) */
    --font-typewriter: 'Special Elite', 'Courier New', monospace;  /* actual typewriter */
    --font-academic: 'Libre Baskerville', 'Georgia', serif;        /* 60s journal feel */
    --font-thesis: 'EB Garamond', 'Garamond', serif;               /* dissertation */
    --font-ibm: 'IBM Plex Mono', 'Courier New', monospace;         /* period-correct tech */

    --line-height: 1.5;
    --line-height-tight: 1.2;      /* ASCII art, code */
    --line-height-loose: 1.8;      /* essay prose */
}


/* General */
body {
    background-color: var(--bg-page);
    color: var(--text-primary);
    font-family: var(--font-body);
}

/* Errors */
.text-danger {
    color: var(--danger) !important;
}

/* --------------------------
 * Terminal
 * --------------------------*/
.terminal {
    max-width: 800px;
    margin: 50px auto;
    padding: 30px;
    background-color: var(--bg-terminal);
    border-radius: 4px;
    
    /* Outer bezel - lightest gray */
    border: 4px solid var(--gray-muted);
    
    box-shadow: 
        /* Middle bezel layer */
        inset 0 0 0 8px var(--gray-text),
        /* Inner bezel layer */
        inset 0 0 0 12px var(--black-ink),  /* darkest */
        /* Inner bevel shading - top/left lit, bottom/right shadowed */
        inset 4px 4px 8px rgba(0, 0, 0, 0.9),
        inset -2px -2px 4px rgba(255, 255, 255, 0.05),
        /* CRT screen depth */
        inset 0 0 40px rgba(0, 0, 0, 0.7),
        /* Lift off page */
        0 6px 20px rgba(0, 0, 0, 0.3);  
}

    .terminal h2 {
        margin-bottom: 10px;
        color: var(--text-terminal);
        font-family: var(--font-mono);
        /* no glow - let the text be text */
    }

    .terminal .zork-intro {
        font-family: var(--font-mono);
        font-size: 1.4rem;
        color: var(--text-terminal);
    }

        .terminal .zork-intro em {
            font-size: 1.15em;
        }

    .terminal .text-muted {
        color: var(--gray-muted) !important;
    }
    
    /* Inline input: >_ [input field] */
    .terminal-input {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-top: 1rem;
    }

    .terminal-input .prompt {
        color: var(--text-terminal);
        font-family: var(--font-mono);
        font-size: 1.4rem;
        user-select: none;
    }

    .terminal-input input {
        flex: 1;
        max-width: 550px;              /* underline width */
        background: transparent;
        border: none;
        border-bottom: 1px solid var(--text-primary);  /* underline effect */
        color: var(--text-terminal);
        font-family: var(--font-mono);
        font-size: 1.4rem;
        padding: 0.25rem 0;
        outline: none;
    }

    .terminal-input input:focus {
        border-bottom-color: var(--text-terminal);
    }

    .terminal-input input::placeholder {
        color: var(--text-primary);  /* underline effect */
        opacity: 0.5;
    }

    /* Hidden but functional */
    .terminal-input button {
        position: absolute;
        left: -9999px;
    }

/* ----------------------------------------
 * Zork Output (outside terminal, on page)
 * ----------------------------------------*/
.zork-output {
    max-width: 800px;
    margin: 2rem auto;
    padding: 0 30px;
    color: var(--text-primary);
    line-height: var(--line-height);
    text-align: center;
    min-height: 5rem;              /* footer spacing */
}

.zork-output pre {
    display: inline-block;          /* centers the block */
    text-align: left;               /* but keeps ASCII aligned */
    font-family: var(--font-mono);
    font-size: 12px;
    line-height: var(--line-height-tight);
    color: var(--gray-ink);
    white-space: pre;
    margin: 0;
}

.zork-output p {
    font-family: var(--font-typewriter);    /* typewriter, academic, thesis, ibm */
    margin-top: 4rem;                       /* space to conversation text */
}

.zork-output p.idle {
    animation: fadeIn 1.5s ease-in;  /* Fade in effect */
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* Discovered nav links (right side) */
#nav-discovered {
    display: flex;
    gap: 1rem;
    margin-left: 1rem;
    margin-right: auto;    /* push everything else right, keep this left */
}

#nav-discovered .discovered {
    font-family: var(--font-mono);
    font-size: 0.85rem;
    color: var(--gray-muted);
    text-decoration: none;
    transition: color 0.2s;
}

#nav-discovered .discovered:hover {
    color: var(--accent-rust);
}

/* --------------------------
 * Cave
 * --------------------------*/
.cave {
    text-align: center;
    margin: 4rem auto;
}

.cave img {
    max-width: 100%;
    height: auto;
}

/* --------------------------
 * Footer
 * --------------------------*/
.site-footer {
    text-align: center;
    margin-top: 4rem;
    padding-bottom: 1.5rem;
    font-family: var(--font-mono);
    font-size: 0.95rem;
    color: var(--gray-muted);
}

.site-footer a {
    color: var(--accent-rust);
    text-decoration: none;
}

.site-footer a:hover {
    text-decoration: underline;
}


/* --------------------------
/* Page Content (essays, privacy, cave, etc.) */
/* --------------------------*/
.page-content {
    max-width: 700px;
    margin: 3rem auto;
    padding: 2rem 3rem;
    background-color: var(--white-terminal);  /* brick, bond, newsprint, terminal, pure */
    border: 1px solid var(--gray-rule);
    border-radius: 4px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    
    font-family: var(--font-thesis);  /* mono, serif, body, typewriter, academic, thesis, ibm */
    line-height: var(--line-height-loose);
    color: var(--text-primary);
}

.page-content h1 {
    /* font-family: var(--font-serif);  mono, serif, body, typewriter, academic, thesis, ibm */
    margin-bottom: 1.5rem;
}

.page-content .lead {
    font-size: 1.20rem;
    color: var(--gray-text);
}

.page-content .tldr {
    margin-top: 2rem;
    /* color: var(--serif-warm); */
}

.page-content .page-footer {
    margin-top: 3rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--gray-rule);
    display: flex;
    gap: 2rem;
}

.page-content .back-link {
    color: var(--accent-rust);
    text-decoration: none;
    font-family: var(--font-mono);
    font-size: 0.9rem;
}

.page-content .back-link:hover {
    text-decoration: underline;
}

/* --------------------------
 * Essay Index (list page)
 * Wrapper: .page-content.essay-index
 * --------------------------*/
.essay-index h1 {
    font-family: var(--font-typewriter); /* mono, serif, body, typewriter, academic, thesis, ibm */
    color: var(--text-terminal);
    margin-bottom: 0rem;
}

.essay-list {
    list-style: none;
    padding: 0;
}

.essay-item {
    margin-bottom: 1.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--gray-rule);
}

.essay-item:last-child {
    border-bottom: none;
}

.essay-link {
    display: block;
    text-decoration: none;
    transition: color 0.2s;
}

.essay-link:hover .essay-title {
    color: var(--accent-rust);
}

.essay-date {
    font-family: var(--font-mono);
    font-size: 0.85rem;
    color: var(--gray-muted);
    display: block;
    margin-bottom: 0.25rem;
}

.essay-title {
    font-size: 1.25rem;
    color: var(--text-primary);
    transition: color 0.2s;
    font-family: var(--font-academic);  /* mono, serif, body, typewriter, academic, thesis, ibm */
}

.essay-desc {
    font-size: 0.9rem;
    color: var(--gray-muted);
    margin: 0.5rem 0 0 0;
    line-height: 1.4;
}

.no-essays {
    color: var(--gray-muted);
    font-style: italic;
}

/* --------------------------
 * Essay Detail (reading view)
 * cardless, full-bleed newsprint
 * Wrapper: .page-content.essay-detail
 * --------------------------*/
.essay-page {
    background: var(--white-newsprint);
    /* border-top: 1px solid var(--gray-rule); */
}

.essay-container {
    max-width: 740px;
    margin-left: max(1.5rem, calc(50% - 420px));
    padding: 1.25rem 3rem 2.5rem 0;
}

 .essay-header {
    margin-bottom: 0.5rem;
    padding-left: 0; /* date/title aligned above the text spine */
}

.essay-header-row {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
}

.essay-header .essay-date {
    font-size: 1rem;
    color: var(--gray-muted);
    display: block;
    margin-bottom: 0.5rem;
    font-family: var(--font-mono);  /* mono, serif, body, typewriter, academic, thesis, ibm */
}

.essay-header .essay-title {
    font-size: 2rem;
    margin: 0 0 0.1rem 0;
    line-height: var(--line-height-tight);
    font-family: var(--font-academic);  /* mono, serif, body, typewriter, academic, thesis, ibm */
}

.essay-subtitle {
    color: var(--serif-faded);
    font-size: 1.1rem;
    margin: 0;
    font-style: italic;
}

.essay-nav {
    display: flex;
    gap: 1.5rem;
    font-family: var(--font-mono);
    font-size: 0.8rem;
}

.essay-nav a {
    color: var(--accent-rust);
    text-decoration: none;
}

.essay-nav a:hover { text-decoration: underline; }

.essay-nav--bottom {
    margin-top: 1.5rem;
    padding-top: 0.75rem;
    margin-bottom: 0;
    /*border-top: 1px solid var(--gray-rule);*/
}

/* Content — prose typography */
.essay-content {
    color: var(--gray-text);
    font-size: 1.05rem;
    line-height: var(--line-height-dense);
    padding-left: 0.3rem; /* spine offset */
    padding-right: 3.5rem; /* leave white space on right side */
    padding-bottom: 0rem;
    margin-left: 0.2rem;
    border-left: 1px solid var(--gray-hint); /* ink, text, muted, hint, rule */
}

/* bottom nav */
.essay-content ~ .essay-nav {
    justify-content: flex-end;
    margin-top: 1.5rem;
    padding-top: 4rem;
    /* border-top: 1px solid var(--gray-rule); */
}

/* DROP CAP */
.essay-content > p:first-of-type::first-letter {
    float: left;
    font-family: var(--font-academic);
    font-size: 3.6em;
    line-height: 0.75;
    font-weight: 700;
    color: var(--black-ink);
    padding-right: 0.06em;
    margin-top: 0.06em;
    margin-left: -0.04em;
}

.essay-content p {
    margin: 1rem 0;
    font-family: var(--font-academic);   /* mono, serif, body, typewriter, academic, thesis, ibm */
    font-size: 0.75em
}

.essay-content h2 {
    color: var(--text-primary); /* terminal, ink, soft, text, muted, hint, rule */
    font-size: 1.4rem;
    margin: 2rem 0 1rem 0;
}

.essay-content h3 {
    color: var(--serif-cool);
    font-size: 1.2rem;
    margin: 1.5rem 0 0.75rem 0;
}

.essay-content a {
    color: var(--accent-rust);
    text-decoration: underline;
}

.essay-content a:hover {
    color: var(--accent-copper);
}

.essay-content blockquote {
    font-family: var(--font-typewriter);
    font-size: 0.9rem;
    line-height: 1.5;
    margin: 0.6rem 0 0.6rem 1rem;
    padding: 0.3rem 0 0.3rem 1rem;
    border-left: 1px solid var(--lead-rule);
    color: var(--serif-faded);
}

.essay-content code {
    font-family: var(--font-ibm);
    background: rgba(0, 0, 0, 0.035);
    padding: 0.1rem 0.35rem;
    border-radius: 2px;
    font-size: 0.82em;
}

.essay-content pre {
    font-family: var(--font-ibm);
    background: rgba(0, 0, 0, 0.035);
    padding: 0.6rem 0.8rem;
    overflow-x: auto;
    border-radius: 2px;
    margin: 0.6rem 0;
    font-size: 0.85rem;
    line-height: 1.4;
}

.essay-content pre code {
    background: none;
    padding: 0;
}

/* ── Nav discovery slots ──────────────────────────────────────
   All slots rendered on load; undiscovered = invisible but 
   space-reserved. Discovery triggers a slow fade + glitch.
   (Placeholder glyphs ▓░░ saved for future ambient glitch system.)
   ──────────────────────────────────────────────────────────── */

#nav-discovered {
    display: flex;
    gap: 0.25rem;
    margin-left: 1.5rem;
    align-items: center;
}

.nav-slot {
    opacity: 0;
    pointer-events: none;
    display: inline-block;
    padding: 0.25rem 0.6rem;
    font-family: 'VT323', monospace;
    font-size: 1.1rem;
    letter-spacing: 0.05em;
    color: inherit;
    text-decoration: none;
    /* reserve the space even when invisible */
    visibility: hidden;
}

.nav-slot.discovered {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
}

.nav-slot.discovered:hover {
    text-shadow: 0 0 6px rgba(0, 255, 255, 0.4);
}

/* ── Discovery animation ─────────────────────────────────────
   Slow fade-in (~60% of duration), then two glitch bursts 
   with horizontal jitter and cyan/magenta chromatic split.
   ──────────────────────────────────────────────────────────── */

.nav-slot.discovering {
    animation: nav-discover 2s ease-out forwards;
    visibility: visible;
}

@keyframes nav-discover {
    /* slow fade in */
    0%   { opacity: 0;   transform: translateX(0);    text-shadow: none; }
    50%  { opacity: 0.6; transform: translateX(0);    text-shadow: none; }
    58%  { opacity: 0.7; transform: translateX(0);    text-shadow: none; }

    /* glitch 1 — medium, the announcement */
    60%  { opacity: 0.9; transform: translateX(-3px); text-shadow: -2px 0 cyan, 2px 0 magenta; }
    64%  { opacity: 0.3; transform: translateX(3px);  text-shadow: 2px 0 magenta, -2px 0 cyan; }
    68%  { opacity: 0.85; transform: translateX(0);   text-shadow: none; }

    /* glitch 2 — subtle echo */
    73%  { opacity: 1;   transform: translateX(1px);  text-shadow: -1px 0 cyan, 1px 0 magenta; }
    76%  { opacity: 0.7; transform: translateX(-1px); text-shadow: 1px 0 cyan; }
    79%  { opacity: 1;   transform: translateX(0);    text-shadow: none; }

    /* glitch 3 — the big one, unmissable */
    84%  { opacity: 1;   transform: translateX(-6px) scale(1.15); text-shadow: -4px 0 cyan, 4px 0 magenta, 0 0 12px rgba(0,255,255,0.5); }
    87%  { opacity: 0.2; transform: translateX(5px) scale(1.1);  text-shadow: 3px 0 magenta, -3px 0 cyan, 0 0 8px rgba(255,0,255,0.4); }
    90%  { opacity: 1;   transform: translateX(-2px) scale(1.05); text-shadow: -2px 0 cyan, 2px 0 magenta; }
    93%  { opacity: 1;   transform: translateX(0) scale(1);      text-shadow: none; }

    /* settle */
    100% { opacity: 1;   transform: translateX(0) scale(1);      text-shadow: none; }
}